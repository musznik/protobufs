syntax = "proto3";

package meshtastic;

option csharp_namespace = "Meshtastic.Protobufs";
option go_package = "github.com/meshtastic/go/generated";
option java_outer_classname = "NodeModAdminProtos";
option java_package = "com.geeksville.mesh";
option swift_prefix = "";


message NodeModAdmin {
  /*
   * sniffer enabled
   */
  bool sniffer_enabled = 1;
  /*
   * do not send prv over mqtt
   */
  bool do_not_send_prv_over_mqtt = 2;
  /*
   * local stats over mesh enabled
   */
  bool local_stats_over_mesh_enabled = 3;
  /*
   * local stats extended over mesh enabled
   */
  bool local_stats_extended_over_mesh_enabled = 4;

  /*
   * idlegame enabled
   */
  bool idlegame_enabled = 5;

  /*
   * base ch util + additional chan utilization defined by user
   */
  uint32 additional_chutil = 6;

  /*
   * base tx util + additional tx chan utilization defined by user
   */
  float additional_txutil = 7;

  /*
   * additional chutil polite percent defined by user
   */
  uint32 additional_polite_channel_percent = 8;

  /*
   * additional chutil polite percent defined by user
   */
  uint32 additional_polite_duty_cycle_percent = 9;

  /*
   * current tx util limit
   */
  float current_tx_util_limit = 10;

  /*
   * current nmax channel util percent
   */
  uint32 current_max_channel_util_percent = 11;

  /*
   * current polite channel util percent
   */
  uint32 current_polite_channel_util_percent = 12;

  /*
   * current polite duty cycle percent
   */
  uint32 current_polite_duty_cycle_percent = 13;

  /*
   * auto responder
   */
  bool auto_responder_enabled = 14;

  /*
   * auto responder text
   */
  string auto_responder_text = 15;

    /*
   * auto responder
   */
  bool auto_redirect_messages = 16;

  /*
   * auto responder text
   */
  uint32 auto_redirect_target_node_id = 17;

    /*
   * telemetry limiter enabled
   */
  bool telemetry_limiter_enabled = 18;

  /*
  * telemetry limiter, limit telemetry per minute
  */
  uint32 telemetry_limiter_packets_per_minute = 19;

   /*
   * telemetry limiter, auto chanUtil limiter
   */
  bool telemetry_limiter_auto_chanutil_enabled = 20;

  /*
  * telemetry limiter, limit telemetry per minute
  */
  uint32 telemetry_limiter_auto_chanutil_threshold = 21;

  /*
   * position limiter, enabled
   */
  bool position_limiter_enabled = 22;

  /*
  * position limiter, time threshold
  */
  uint32 position_limiter_time_minutes_threshold = 23;

  bool opportunistic_flooding_enabled = 24;
  uint32 opportunistic_base_delay_ms = 25;
  uint32 opportunistic_hop_delay_ms = 26;
  uint32 opportunistic_snr_gain_ms = 27;
  uint32 opportunistic_jitter_ms = 28;
  bool opportunistic_cancel_on_first_hear = 29;
  bool opportunistic_auto  = 30;

  // Proactive traceroute scheduling and TTL controls (FW+)
  bool proactive_traceroute_enabled = 31;
  uint32 traceroute_stale_ratio_threshold_percent = 32;
  uint32 traceroute_global_cooldown_hours = 33;
  uint32 traceroute_per_dest_cooldown_hours = 34;
  uint32 traceroute_chanutil_threshold_percent = 35;
  uint32 traceroute_max_per_day = 36;
  uint32 traceroute_expanding_ring_initial_hop = 37;
  uint32 traceroute_expanding_ring_max_hops = 38;
  uint32 traceroute_probe_jitter_ms = 39;
  // Optional TTL override (hours); 0 means use firmware defaults
  uint32 route_ttl_base_hours = 40;
  uint32 route_ttl_per_conf_hours = 41;
  uint32 route_ttl_max_hours = 42;

  // Routing learning thresholds (FW+)
  // Minimal confidence required to use a learned route. 0 means firmware default (1).
  uint32 min_confidence_to_use = 43;
  // Hysteresis threshold for next-hop promotion in tenths of a cost unit (ETX).
  // 0 means firmware default (5 => 0.5 cost units).
  uint32 hysteresis_cost_threshold_tenths = 44;

  // fw+ HEARD sampling (texts only for now)
  bool heard_sampling_enabled_texts = 45;
  uint32 heard_sample_percent_texts = 46;   // 0-100
  uint32 heard_window_ms = 47;              // aggregation window
  uint32 heard_max_reports_per_agg = 48;    // cap per aggregate
  uint32 heard_max_active_keys = 49;        // cap active aggregates
}